# Project Summary: Portfolio Tracker Backend

This document provides a summary of the work done on the portfolio tracker backend and outlines the next steps for the development team.

## Project Overview

The goal of this project is to create a portfolio tracking service that can be integrated into an existing website. The backend is responsible for managing portfolio data, fetching market prices, and providing an API for the frontend.

## What has been done

*   **Project Structure:** A FastAPI backend has been set up with a clear project structure, separating concerns like API endpoints, services, and database models.
*   **Database:** The backend is configured to connect to a Supabase PostgreSQL database. The database schema has been defined using SQLAlchemy, and the tables have been created.
*   **Market Data:** A service has been implemented to fetch real-time market data from Yahoo Finance.
*   **API:** A FastAPI application has been created with the following endpoint:
    *   `GET /api/portfolios/{portfolio_id}`: Fetches the summary of a portfolio, including its holdings and their current market value.
*   **Sample Data:** The database has been seeded with a sample portfolio and holdings for demonstration and testing purposes.

## How to run the backend

1.  **Install dependencies:**
    ```bash
    pip install -r backend/requirements.txt
    ```
2.  **Set up environment variables:** Create a `.env` file in the project root with your Supabase credentials. A template is provided in the previous conversations.
3.  **Run the server:** From the `backend` directory, run the following command:
    ```bash
    uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
    ```

## API Documentation

The API documentation is automatically generated by FastAPI and is available at:
[http://localhost:8000/docs](http://localhost:8000/docs)

## Next Steps for the Frontend Team

You can now start integrating the portfolio tracker into your website by fetching data from the backend API.

**Endpoint:** `GET /api/portfolios/{portfolio_id}`

To get the data for the sample portfolio, make a GET request to:
[http://localhost:8000/api/portfolios/my-portfolio](http://localhost:8000/api/portfolios/my-portfolio)

**Sample Response:**
```json
{
  "portfolio_id": "my-portfolio",
  "total_value": 171500,
  "total_cost_basis": 169500,
  "total_unrealised_gain": 2000,
  "holdings": [
    {
      "ticker": "AAPL",
      "position_value": 1700,
      "cost_basis": 1500,
      "unrealised_gain": 200
    },
    {
      "ticker": "GOOGL",
      "position_value": 14500,
      "cost_basis": 14000,
      "unrealised_gain": 500
    },
    {
      "ticker": "BTC-USD",
      "position_value": 32500,
      "cost_basis": 30000,
      "unrealised_gain": 2500
    }
  ]
}
```
*(Note: The values in the response will vary based on the current market prices.)*

You can use this data to display the portfolio summary and holdings on your website.

## Next Steps for the Backend Team

The current implementation provides a read-only view of a single portfolio. The following features need to be implemented next:

*   **CRUD operations for portfolios:** Create, Read, Update, and Delete portfolios.
*   **CRUD operations for holdings:** Add, update, and remove holdings from a portfolio.
*   **User authentication and authorization:** Ensure that users can only access their own portfolios.
*   **Transaction tracking:** Implement the `Trade` model and create endpoints to record buy and sell transactions.
*   **Realised gains calculation:** Implement the logic to calculate realised gains based on the transaction history.
*   **Historical performance:** Create endpoints to provide data for performance charts (e.g., YoY, MoM).
